<div class="container">
    <div class="page-header">
        <h1>Comparative Estimation<br>
            <small>Sprint Creation</small>
        </h1>
    </div>

    <ce-panel class="col-lg-8">
        <ce-panel-header>
            User Stories
        </ce-panel-header>
        <ce-panel-content>
            <ng-container *ngFor="let story of stories; let i = index">
                <div *ngIf="savedStoryOnChange != story" class="input-group ce-margin-down ce-box">
                    <button (click)="onChangeStart(i)" class="btn btn-default ce-btn-left">{{ story }}</button>
                    <button (click)="onDelete(i)" class="btn btn-default ce-btn-right" type="button">
                        <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                    </button>
                </div>
                <div *ngIf="savedStoryOnChange == story" class="input-group ce-box">
                    <input [ceFocus]="toggleFocusChangeInput" (keyup.enter)="onChangeComplete(i)" type="text" class="form-control" [(ngModel)]="changeStory">
                    <button (click)="onChangeComplete(i)" class="btn btn-default ce-btn-right" type="button">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </button>
                </div>
            </ng-container>
                
            <div *ngIf="savedStoryOnChange == emptyStory" class="input-group ce-box">
                <input [ceFocus]="toggleFocusAddInput" (keyup.enter)="onAdd()" type="text" class="form-control" placeholder="Enter user story..." [(ngModel)]="inputStory">
                <button (click)="onAdd()" class="btn btn-default ce-btn-right" type="button">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </button>
            </div>
            <div class="ce-btn-sprint-create">
                <button [class.disabled]="!isSendAllowed" type="button" class="btn btn-primary" (click)="onCreateSprint()">Create Sprint</button>
            </div>
            <div *ngIf="connStatus == eConnectionStatus.sendInProgress" class="alert ce-alert-bottom alert-info" role="alert">Sprint creation request sent to server.</div>
            <div *ngIf="connStatus == eConnectionStatus.sendError" class="alert ce-alert-bottom alert-danger" role="alert">An error occured. Maybe server is unavailable. Please try again later.</div>
        </ce-panel-content>
    </ce-panel>
    <div class="col-lg-4"></div>
</div>